.fx {
    max-width: 1200px;
    box-shadow: 0 0 20px rgba(0, 0, 0, 0.2);
    margin: 0 auto;
    overflow: hidden;
}
.fixed-header .fx {
    background: #0e4f93;
}
@media (min-width: 1200px) {
    .fx {
        max-width: 1200px;
    }
}
@media (min-width: 1300px) {
    .fx {
        max-width: 1300px;
    }
}
@media (min-width: 1600px) {
    .fx {
        max-width: 1600px;
        box-shadow: 0 0 20px rgba(0, 0, 0, 0.2);
        margin: 0 auto;
    }
}
@media (max-width: 991.99px) {
    .fx {
        -webkit-transition: all 0.33s cubic-bezier(.694, .0482, .335, 1);
        -moz-transition: all 0.33s cubic-bezier(.694, .0482, .335, 1);
        -ms-transition: all 0.33s cubic-bezier(.694, .0482, .335, 1);
        -o-transition: all 0.33s cubic-bezier(.694, .0482, .335, 1);
        transition: all 0.33s cubic-bezier(.694, .0482, .335, 1);
        margin-bottom: 3rem;
    }

    body.open_menu .fx {
        -webkit-transform: translateX(255px);
        -ms-transform: translateX(255px);
        transform: translateX(255px);
        overflow: hidden;
        position: fixed;
        left: 0;
        top: 0;
        bottom: 0;
        right: 0;
        z-index: 1;
    }
 }
 // $subchild_categories = [];
 // if(!empty($category_ids->child_category_id)){
 //     return [count(Category::latest('updated_at')->get()),AdditionalDataResource::getCategories(), Category::latest('updated_at')->get()];
 //     return $category_ids->child_category_id;
 //     return json_encode(empty($category_ids->child_category_id));
 //     $subchild_categories = AdditionalDataResource::getChildrenCategoriesByParentId($category_ids->child_category_id);
 // }

 //  function getCategories(){
 //     $categories = Category::latest('updated_at')->get();

 //     $parentCategories = [];
 //     foreach ($categories as $category) {
 //         if ($category['parent_id'] === null) {
 //             $parentCategories[] = $category;
 //         }
 //     } 
     
 //     $childCategories = [];
 //     foreach ($parentCategories as $parentCategory) {
 //         $parentId = $parentCategory['id'];
 //         $children = [];
 //         foreach ($categories as $category) {
 //             if ($category['parent_id'] == $parentId) {
 //                 $children[] = $category;
 //             }
 //         }
 //         $childCategories[$parentId] = $children;
 //     }

 //     return $childCategories;

 //     $subchildCategories = [];
 //     foreach ($childCategories as $parentId => $children) {
 //         foreach ($children as $child) {
 //             $childId = $child['id'];
 //             $subchildren = [];
 //             foreach ($categories as $category) {
 //                 if ($category['parent_id'] === $childId) {
 //                     $subchildren[] = $category;
 //                 }
 //             }
 //             $subchildCategories[$childId] = $subchildren;
 //         }
 //     }

 //     return ['parent_categories' => $parentCategories, 'child_categories'=> $childCategories, 'children_categories'=> $subchildCategories];
 // }
 // return $category_ids;

 // return getCategories();

/**
 * @uses Test anything Nam
 * @routes {update products id} http://127.0.0.1:8000/experiment/product
 *
 Route::get('/experiment', function(){
    $user = User::findOrFail(1);
    $pass = 'tpbd@admin-1234';
    $password = Hash::make($pass);

    $user->password = $password;
    $user->save();

    return ["password updated"];
});
 */
// mapping to update category Id
Route::get('/experiment/product', function () {
    // return AdditionalDataResource::getCategories();
    return Product::all();
    // return Category::whereNotIn('id', ["66","18","58"])->get()->pluck('id');
    // $products = Product::get();
    // $product_ids = $products->pluck('id')->toArray();

    // $category_id = '{"main_category_id":["66","18"],"child_category_id":["59","60","61","62","63","65"],"subchild_category_id":[]}';

    // Product::whereIn('id', $product_ids)->update(['category_id'=> $category_id]);

    // return ["message"=> 'Updated Successfully!', 'data'=> Product::get()];
});

/* 
 Route::get('/experiment/product/{id}', function ($id) {
    // $products = Product::select('id', 'category_id', 'name')->latest()->get();
    // $product_ids = $products->pluck('id')->toArray();

    // $productModel = new Product();
    // $products = $productModel->getProductsByChildrenCategoryId($id);

    $pdt = new Product();
    $products = $pdt->getProductsByCategoryId($id, null, true);

    

    // $category_id = '{"main_category_id":["9","18","58"],"child_category_id":["60","61","62","63","65","66"],"subchild_category_id":["67"]}';

    // Product::whereIn('id', $product_ids)->update(['category_id'=> $category_id]);

    function createSlug(string $table_name, string $title){
        $slug = Str::slug($title);

        if(DB::table($table_name)->where('slug', $slug)->exists()){
            $split_slug = str_split($slug);
            $last_char = $split_slug[count($split_slug) - 1];

            $modified_slug = is_int(intval($last_char)) ? $slug . ($last_char + 1) : $slug . '-' . 1;

            if(DB::table($table_name)->where('slug', $modified_slug)->exists()){
                return createSlug($table_name, $title);
            }

            return $modified_slug;
        }

        return $slug;
    }

    return ["message"=> 'Updated Successfully!', 'data'=> $products];
}); */
{{-- <div>
                                                    <div class="product-card">
                                                        <div class="product-card__image">
                                                            <a
                                                                href="{{ Route('frontend.single-product', $product->slug) }}">
                                                                <img src="{{ asset($product->thumbnail) }}"
                                                                    alt="{{ $product->name }}"></a>
                                                            <div class="product-card__action">
                                                                <a href="#" class="quick-view"
                                                                    data-id="{{ $product->id }}">
                                                                    <i class="far fa-search"></i>
                                                                </a>
                                                                @auth
                                                                    <a class="addToWishlist" href="#"
                                                                        data-id="{{ $product->id }}">
                                                                        <i class="far fa-heart"></i>
                                                                    </a>
                                                                @endauth
                                                            </div>
                                                        </div>
                                                        <div class="product-card__content">
                                                            <h6 class="product-card__title"><a
                                                                    href="{{ Route('frontend.single-product', $product->slug) }}">{{ $product->name }}</a>
                                                            </h6>
                                                            <div class="product-card__review">
                                                                <div class="star_content">
                                                                    <div class="star"></div>
                                                                    <div class="star"></div>
                                                                    <div class="star"></div>
                                                                    <div class="star"></div>
                                                                    <div class="star"></div>
                                                                </div>
                                                                <span>( 0 review )</span>
                                                            </div>
                                                            <div class="product-card__price">
                                                                @if ($product->price->sale_price != $product->price->regular_price)
                                                                    <del class="price">৳
                                                                        {{ number_format($product->price->regular_price) }}</del>
                                                                @endif
                                                                <span class="price">৳
                                                                    {{ number_format($product->price->sale_price) }}</span>
                                                            </div>
                                                            <a class="product-card__link"
                                                                href="{{ Route('frontend.single-product', $product->slug) }}">
                                                                <i class="novicon-cart"></i>
                                                                <span>Select option</span>
                                                            </a>
                                                        </div>
                                                    </div>
                                                </div> --}}
                                                
                                                {{-- <div>
                                                    <div class="product-card">
                                                        <div class="product-card__image">
                                                            <a
                                                                href="{{ Route('frontend.single-product', $product->slug) }}">
                                                                <img src="{{ asset($product->thumbnail) }}"
                                                                    alt="{{ $product->name }}"></a>
                                                            <div class="product-card__action">
                                                                <a href="#" class="quick-view"
                                                                    data-id="{{ $product->id }}">
                                                                    <i class="far fa-search"></i>
                                                                </a>
                                                                @auth
                                                                    <a class="addToWishlist" href="#"
                                                                        data-id="{{ $product->id }}">
                                                                        <i class="far fa-heart"></i>
                                                                    </a>
                                                                @endauth
                                                            </div>
                                                        </div>
                                                        <div class="product-card__content">
                                                            <h6 class="product-card__title"><a
                                                                    href="{{ Route('frontend.single-product', $product->slug) }}">{{ $product->name }}</a>
                                                            </h6>
                                                            <div class="product-card__review">
                                                                <div class="star_content">
                                                                    <div class="star"></div>
                                                                    <div class="star"></div>
                                                                    <div class="star"></div>
                                                                    <div class="star"></div>
                                                                    <div class="star"></div>
                                                                </div>
                                                                <span>( 0 review )</span>
                                                            </div>
                                                            <div class="product-card__price">
                                                                @if ($product->price->sale_price != $product->price->regular_price)
                                                                    <del class="price">৳
                                                                        {{ number_format($product->price->regular_price) }}</del>
                                                                @endif
                                                                <span class="price">৳
                                                                    {{ number_format($product->price->sale_price) }}</span>
                                                            </div>
                                                            <a class="product-card__link"
                                                                href="{{ Route('frontend.single-product', $product->slug) }}">
                                                                <i class="novicon-cart"></i>
                                                                <span>Select option</span>
                                                            </a>
                                                        </div>
                                                    </div>
                                                </div> --}}

                                                {{-- <div>
                                                    <div class="product-card">
                                                        <div class="product-card__image">
                                                            <a
                                                                href="{{ Route('frontend.single-product', $product->slug) }}">
                                                                <img src="{{ asset($product->thumbnail) }}"
                                                                    alt="{{ $product->name }}"></a>
                                                            <div class="product-card__action">
                                                                <a href="#" class="quick-view"
                                                                    data-id="{{ $product->id }}">
                                                                    <i class="far fa-search"></i>
                                                                </a>
                                                                @auth
                                                                    <a class="addToWishlist" href="#"
                                                                        data-id="{{ $product->id }}">
                                                                        <i class="far fa-heart"></i>
                                                                    </a>
                                                                @endauth
                                                            </div>
                                                        </div>
                                                        <div class="product-card__content">
                                                            <h6 class="product-card__title"><a
                                                                    href="{{ Route('frontend.single-product', $product->slug) }}">{{ $product->name }}</a>
                                                            </h6>
                                                            <div class="product-card__review">
                                                                <div class="star_content">
                                                                    <div class="star"></div>
                                                                    <div class="star"></div>
                                                                    <div class="star"></div>
                                                                    <div class="star"></div>
                                                                    <div class="star"></div>
                                                                </div>
                                                                <span>( 0 review )</span>
                                                            </div>
                                                            <div class="product-card__price">
                                                                @if ($product->price->sale_price != $product->price->regular_price)
                                                                    <del class="price">৳
                                                                        {{ number_format($product->price->regular_price) }}</del>
                                                                @endif
                                                                <span class="price">৳
                                                                    {{ number_format($product->price->sale_price) }}</span>
                                                            </div>
                                                            <a class="product-card__link"
                                                                href="{{ Route('frontend.single-product', $product->slug) }}">
                                                                <i class="novicon-cart"></i>
                                                                <span>Select option</span>
                                                            </a>
                                                        </div>
                                                    </div>
                                                </div> --}}
                    // return $row->price->sale_price;
                    // return '<span class="text-center">'. $row->price->sale_price .' TK'.'</span>';
                    // $data = '<span class="text-center">' . $row->price->sale_price .' TK';
                    // $data .= '</span>';
                    // return $row->price->regular_price;

                    // return '<a class="btn btn-sm btn-warning border-0 px-10px fs-15" href="' . $row->price->sale_price . '"><i class="far fa-pencil-alt"></i></a>';
{{-- <style>
  .special-offer-title {
      background: #1399bf;
      text-align: center;
      padding: 4px 6px;
      border-radius: 4px;
      color: #e4e4e4;
  }
</style> --}}


{{-- <h3>
 @php
     echo '<script>document.write(window.innerWidth)</script>';
 @endphp --}}

{{-- </h3> --}}
                                {{-- <div class="col-lg-4 col-md-4 col-6">
                                    <div class="product-card">
                                        <div class="product-card__image">
                                            <a href="{{ Route('frontend.single-product', $product->slug) }}">
                                                <img src="{{ asset($product->thumbnail) }}" alt="{{ $product->name }}">
                                            </a>
                                            <div class="product-card__action">
                                                <a href="#" class="quick-view"
                                                    data-id="{{ $product->id }}">
                                                    <i class="far fa-search"></i>
                                                </a>
                                                @auth
                                                    <a class="addToWishlist" href="#" data-id="{{ $product->id }}">
                                                        <i class="far fa-heart"></i>
                                                    </a>
                                                @endauth
                                            </div>
                                        </div>
                                        <div class="product-card__content">
                                            <h6 class="product-card__title"><a
                                                    href="{{ Route('frontend.single-product', $product->slug) }}">{{ $product->name }}</a>
                                            </h6>
                                            <div class="product-card__review">
                                                <div class="star_content">
                                                    <div class="star"></div>
                                                    <div class="star"></div>
                                                    <div class="star"></div>
                                                    <div class="star"></div>
                                                    <div class="star"></div>
                                                </div>
                                                <span>( 0 review )</span>
                                            </div>
                                            <div class="product-card__price pb-md-3 pb-1">
                                                <span class="price">৳ {{ $product->price->sale_price }}</span>
                                            </div>
                                            <div class="show-on-list font-secondary pb-2">
                                                <span id="product-availability"
                                                    class="product-available text-sm mb-sm-3 mb-1 fw-500 d-sm-block d-none ms-0">
                                                    <i class="far fa-check-square text-sm"></i>
                                                    In stock
                                                </span>
                                                <div class="text-xxs mb-3 d-sm-block d-none">{!! $product->short_description !!}</div>
                                            </div>
                                            <div class="group-action">
                                                <a class="product-card__link"
                                                    href="{{ Route('frontend.single-product', $product->slug) }}">
                                                    <i class="novicon-cart"></i>
                                                    <span>Add To Cart</span>
                                                </a>
                                                <a href="#" class="quick-view"
                                                    data-id="{{ $product->id }}" data-link-action="quickview">
                                                    <i class="zmdi zmdi-search"></i> </a>
                                                @auth
                                                    <a class="addToWishlist" href="#" data-id="{{ $product->id }}">
                                                        <i class="zmdi zmdi-favorite-outline"></i>
                                                    </a>
                                                @endauth
                                            </div>
                                        </div>
                                    </div>
                                </div> --}}
                                {{-- <div class="pb-3">
                                    <h6 class="facet-title">AVAILABILITY</h6>
                                    <div class="font-secondary text-xxs">
                                        <ul class="checkbox__list">
                                            <li class="checkbox__item">
                                                <label class="facet-label" for="facet_input_85_1501">
                                                    <span class="custom-checkbox">
                                                        <input id="facet_input_85_1501" data-search-url="#" type="checkbox">
                                                        <span class="ps-shown-by-js">
                                                            <i class="material-icons"></i>
                                                        </span>
                                                    </span>
                                                    <span class="js-search-link">Not available
                                                    </span>
                                                </label>
                                            </li>
                                            <li class="checkbox__item">
                                                <label class="facet-label" for="facet_input_85_1502">
                                                    <span class="custom-checkbox">
                                                        <input id="facet_input_85_1502" data-search-url="#" type="checkbox">
                                                        <span class="ps-shown-by-js"><i class="material-icons"></i></span>
                                                    </span>
                                                    <span class="js-search-link">
                                                        In stock
                                                    </span>
                                                </label>
                                            </li>
                                        </ul>
                                    </div>
                                </div> --}}
                                
    {{-- <script>
        $(document).ready(function(){
            // $products = @json($products);

            (function(){
                    const selectedProducts = @json($products);

                    selectedProducts.map(function(product){
                        const productListTableBody = productList({
                            id: product.id,
                            image: publicPath + product.thumbnail, 
                            name: product.name, 
                            code: product.code, 
                            rate: $("#main_total_price").val(), //hash
                            quantities: $("#total_quantities").val(), 
                            prices: $("#main_total_price").val(),
                            data: {
                                product_id: product.product_id,
                            }
                        });

                        // console.log(productListTableBody);
                        $("#product-listing-tbody").append(productListTableBody)
                        calculateSubtotal();
                    });
                }())
        })
    </script> --}}



{{-- 
    @php
        $user = App\Helper\AdditionalDataResource::getReseller();
        $products = App\Helper\AdditionalDataResource::getProductLists();
        $customers = App\Helper\AdditionalDataResource::getCustomerOfReseller();

        $shop_name = $user->reseller->shop_name ? $user->reseller->shop_name :$user->name;
    @endphp


    @extends('layouts.admin.app')

    @section('content')
        <!-- Custom Styles -->
        <style>
            
        </style>

        <div class="row g-3">
            <div class="col-12">
                <form action="{{ route('admin.order-place.store') }}" method="POST" enctype="multipart/form-data" id="order-place">
                    @csrf
                    <div class="card">
                        <div class="card-header px-3 py-2">
                            <div class="d-flex justify-content-between align-items-center">
                                <h6 class="h6 mb-0 text-uppercase">Order Place</h6>
                                <a href="{{ Route('admin.order-place.index') }}" class="btn btn-primary btn-sm text-uppercase">
                                    Go Back
                                </a>
                            </div>
                        </div>
                        <div class="card-body p-4">
                            <div class="row g-3"> 

                                <!-- Customer Selection -->
                                <div class="col-md-4 col-sm-6">
                                    <label for="shop_name" class="form-label require">
                                        <b>Seller Shop</b>  
                                    </label>
                                    <input type="text" value="{{ $shop_name }}" class="form-control custom-input" id="shop_name" name="shop_name" disabled>
                                </div> 

                                <!-- Order Type -->
                                <div class="col-md-4 col-sm-6">
                                    <label for="order_type" class="form-label require">
                                        <b>Order Type </b>  
                                    </label>
                                    <select name="order_type" id="order_type"
                                        class="form-control select" data-placeholder="Order Type">
                                        {{-- <option value=""></option> --} }
                                        <option value="self" {{ $data->sales_type == 'self' ? 'selected' : '' }}>Self</option>
                                        <option value="business" {{ $data->sales_type == 'business' ? 'selected' : '' }}>Business</option>

                                    </select>
                                </div>

                                <!-- Sales Type -->
                                <div class="col-md-4 col-sm-6">
                                    <label for="sales_type" class="form-label require">
                                        <b>Sales Type </b>  
                                    </label>
                                    <select name="sales_type" id="sales_type"
                                        class="form-control select" data-placeholder="{{ __('Sales Type') }}" required> 
                                        {{-- <option value="{{ $data->payment_method }}" selected></option> --} }
                                        <option value="cod" {{ $data->payment_method == 'cod' ? 'selected' : '' }}>Cash On Delivery</option>
                                        <option value="prepaid" {{ $data->payment_method == 'prepaid' ? 'selected' : '' }}>Prepaid</option>

                                    </select>
                                </div>

                                <!-- Customer Selection -->
                                <div class="col-md-4 col-sm-6">
                                    <label for="select_customer" class="form-label require">
                                        <b>Customer Name </b> <span class="text-sm px-1 text-danger"> </span>
                                    </label>
                                    <select name="select_customer" id="select_customer"
                                        class="form-control select" data-placeholder="Customer Name" required>
                                        {{-- <option value="" selected></option> --} }
                                        @foreach ($customers as $customer)
                                            <option value="{{ $customer }}" {{ $customer->id == $data->customer_id ? 'selected' : '' }}>{{ $customer->name }}</option>
                                        @endforeach
                                    </select>
                                </div>

                                <!-- Product Selection -->
                                <div class="col-md-4 col-sm-6">
                                    <label for="select_product" class="form-label require">
                                        <b>Product Name </b> <span class="text-sm px-1 text-danger"> </span>
                                    </label>
                                    <select name="select_product" id="select_product"
                                        class="form-control select" data-placeholder="Product Name" required>
                                        <option value=""></option>
                                        @foreach ($products as $product)

                                            {{-- @if (in_array($product->id, json_decode($data->product_ids)))
                                                <option selected value="{{ json_encode([
                                                        "thumbnail"=> asset($product->thumbnail),
                                                        "name"=> $product->name,
                                                        "code"=> $product->code,
                                                        "max_order"=> $product->max_order,
                                                        "min_order"=> $product->min_order,
                                                        "price"=> $product->price
                                                    ]) }}">
                                                    {{ $product->name }} - <b>#{{ $product->code }}</b>  
                                                </option>
                                            @else --} }
                                                <option value="{{ json_encode([
                                                        "thumbnail"=> asset($product->thumbnail),
                                                        "name"=> $product->name,
                                                        "code"=> $product->code,
                                                        "max_order"=> $product->max_order,
                                                        "min_order"=> $product->min_order,
                                                        "price"=> $product->price
                                                    ]) }}">
                                                    {{ $product->name }} - <b>#{{ $product->code }}</b>  
                                                </option>
                                                
                                            {{-- @endif --} }
                                        @endforeach
                                    </select>
                                </div>

                                <!-- Shipping Address Charge -->
                                <div class="col-md-4 col-sm-6">
                                    <label for="shipping_charge" class="form-label require">
                                        <b>Shipping Charge</b>
                                    </label>
                                    <input type="number" value="{{ $data->shipping_charge }}" class="form-control custom-input" id="shipping_charge" name="shipping_charge">
                                </div>

                                <!-- Product Price DISABLED -->
                                <div class="col-md-3 col-sm-6">
                                    <label for="default_price" class="form-label require">
                                        <b>Default Price</b>
                                    </label>
                                    <input type="number" value="0" class="form-control custom-input" id="default_price" name="default_price" disabled>
                                </div>

                                <!-- Product Price DISABLED -->
                                <div class="col-md-3 col-sm-4">
                                    <label for="reseller_price" class="form-label require">
                                        <b>Reseller Price</b>
                                    </label>
                                    <input type="number" value="0" class="form-control custom-input" id="reseller_price" name="reseller_price" disabled>
                                </div>

                                <!-- Product Price DISABLED -->
                                <div class="col-md-2 col-sm-3">
                                    <label for="invoice_rate" class="form-label require">
                                        <b>Invoice Rate</b>
                                    </label>
                                    <input type="number" value="0" class="form-control custom-input" id="invoice_rate" name="invoice_rate">
                                </div>

                                <!-- Product Total Quantity -->
                                <div class="col-md-2 col-sm-3">
                                    <label for="total_quantities" class="form-label require">
                                        <b>Qty</b>
                                    </label>
                                    <input type="number" value="1" class="form-control custom-input" id="total_quantities" name="total_quantities">
                                </div> 

                                <div class="col-md-2 col-sm-3 d-flex align-items-end justify-content-center">
                                    <button class="btn btn-success px-3 form-control" id="listing"> 
                                        <i class="fas fa-level-down"></i>
                                        <span>Listing</span>
                                    </button>
                                </div>

                                <input type="hidden" name="main_total_price" id="main_total_price" value="0">
                            </div>

                            <!-- Table for listing -->
                            <div class="mt-3">
                                <table class="table table-bordered align-middle text-center" style="width:100%">
                                    <thead class="bg-success p-2">
                                        <tr class="text-nowrap text-white">
                                            <th>Picture</th>
                                            <th>Product Name</th>
                                            <th>Product Code</th>
                                            <th>Rate</th>
                                            <th>Qty</th>
                                            <th>Total Amount</th>
                                            <th width="110">Actions</th>
                                        </tr>
                                    </thead>
                                    <tbody id="product-listing-tbody"></tbody>
                                    <tfoot>
                                        <tr>
                                            <th>Product Items</th>
                                            <th>Subtotal</th>
                                            <th></th>
                                            <th class="hidden" id="subtotal-default-amount">0</th>
                                            <th id="subtotal-quantities">0</th>
                                            <th id="subtotal-amount">0</th>
                                            <th></th>
                                        </tr>
                                    </tfoot>
                                </table>
                            </div>
                        </div>
                        <div class="card-footer text-end px-3 py-2">
                            <button type="submit" class="btn btn-primary btn-sm">Save</button>
                        </div>
                    </div>
                </form>
            </div>
        </div>

    @endsection

    @push('js')
        <script>
            $(document).ready(function(){
                // Initiate total quantity and subtotal amount
                let amount = 0, qty = 0, rate = 0, productRate = 0;
                // Initiate customer and product data object.
                let customerData = {}, productData = {};
                
                const publicPath = window.location.href.split("reseller/")[0];

                // form submission
                $("#order-place").submit(function(event){
                    event.preventDefault();
                    const customer = JSON.parse($("#select_customer").val());
                    const reseller_id = customer.reseller_id;

                    let products = [];

                    $('.product-list-item').each(function(index){
                        products.push(JSON.parse($($('.product-list-item')[index]).attr('product-list-item-data')));
                    });

                    const pdtData = products.reduce(function(accumulator, current){
                        accumulator.price_ids = [...accumulator.price_ids, current.price_id];
                        accumulator.product_ids = [...accumulator.product_ids, current.product_id];

                        return accumulator;
                    }, { product_ids: [], price_ids: [] });

                    const data = { customer_id: customer.id, reseller_id, sub_total: amount, qty, product_ids: JSON.stringify(pdtData.product_ids), price_ids: JSON.stringify(pdtData.price_ids), total:rate, discount: rate - amount, order_type: $('#order_type').val(), sales_type: $('#sales_type').val(), shipping_charge: $('#shipping_charge').val() };


                    $.ajax({
                        url: "{{ route('admin.order-place.store') }}",
                        method: 'POST',
                        data,

                        success: function(data){
                            // console.log(data);
                            if(data.status){
                                window.location.href = "{{ route('admin.order-place.index') }}";
                            }
                        },

                        error: function(error){
                            throw new Error(`There are a major error occurred: ${error.message}`);
                        }
                    });
                });

                function productList({id, image, name, rate, code, quantities, prices, data }) {
                    const pdtItemData = JSON.stringify({...data, price: prices, qty: quantities, price_id: id });

                    return `
                    <tr id="product-list-item--${id}" class="product-list-item" product-list-item-data=${pdtItemData}>
                        <td> <img src="${image}" alt="${name}" height="40" /></td>
                        <td> ${name} </td>
                        <td> ${code} </td>
                        <td> ${rate} Tk. <span class="hidden total-default-amount"> ${productRate}</span></td>
                        <td> <span class="total-amount-of-quantity">${quantities}</span> Pcs</td>
                        <td> <span class="total-amount-of-money">${prices}</span> Tk.</td>
                        <td>
                            <div class="btn-group">
                                <button type="button" remove-product-id="#product-list-item--${id}"
                                    class="btn btn-sm btn-danger border-0 px-10px fs-15 remove-product">
                                    <i class="far fa-trash-alt" remove-product-id="#product-list-item--${id}"></i>
                                </button>
                            </div>
                        </td>
                    </tr>
                    `;
                }

                // Initiating subtotal amounts
                function calculateSubtotal(){
                    let subtotalQuantity = 0, subtotalAmount = 0, subtotalDefaultAmount = 0;

                    $('.total-amount-of-quantity').each(function(index){
                        const value = parseInt($($('.total-amount-of-quantity')[index]).html());
                        subtotalQuantity += value;
                    });

                    $('.total-amount-of-money').each(function(index){
                        const value = parseInt($($('.total-amount-of-money')[index]).html());
                        subtotalAmount += value;
                    });

                    $('.total-default-amount').each(function(index){
                        const value = parseInt($($('.total-default-amount')[index]).html());
                        subtotalDefaultAmount += value;
                    });

                    $('#subtotal-default-amount').html(subtotalDefaultAmount + ' Tk.');
                    $('#subtotal-quantities').html(subtotalQuantity + ' Pcs');
                    $('#subtotal-amount').html(subtotalAmount + ' Tk.');

                    amount = subtotalAmount; qty = subtotalQuantity; rate = subtotalDefaultAmount;
                }

                // select a customer and initiate the customer data
                $("#select_customer").change(function (event) {
                    const data = JSON.parse($(event.target).val());
                    customerData = data;

                    $("#customer_email").val(data.email);
                    $("#customer_phone").val(data.phone);
                    $("#customer_address").val(data.address);

                    // console.log(customerData);
                });

                // select a product and initiate the product data
                $("#select_product").change(function(event){
                    const data = JSON.parse($(event.target).val());
                    productData = { name: data.name, code: data.code, thumbnail: data.thumbnail , max_order: data.max_order , min_order: data.min_order , category_id: data.category_id, ...data.price };

                    $("#total_quantities").val(1)
                    // $("#price").val(productData.reseller_price);
                    $("#reseller_price").val(productData.reseller_price);
                    $("#default_price").val(productData.sale_price);
                    
                    // console.log(productData);
                    saleTypeHandler();
                });

                // handle and update the total selected products, items, quantities and prices
                $("#total_quantities, #invoice_rate").on('click change keyup', function(){
                    $("#main_total_price").val(Number($("#invoice_rate").val()) * Number($("#total_quantities").val()));
                });

                // create product list table
                $("#listing").click(function(event){
                    event.preventDefault();

                    const productListTableBody = productList({
                        id: productData.id,
                        image: productData.thumbnail, 
                        name: productData.name, 
                        code: productData.code, 
                        rate: $("#main_total_price").val(), //hash
                        quantities: $("#total_quantities").val(), 
                        prices: $("#main_total_price").val(),
                        data: {
                            product_id: productData.product_id,
                        }
                    });

                    // console.log(productListTableBody);
                    $("#product-listing-tbody").append(productListTableBody)

                    calculateSubtotal();
                });

                // remove a product from our products list
                // Use event delegation to handle clicks on dynamically added elements
                $("#product-listing-tbody").on("click", ".remove-product", function(event) {
                    const removeId = $(event.target).attr("remove-product-id");

                    $(removeId).remove();
                    calculateSubtotal();
                });

                // sales type changing to handle invoice rate
                $("#order_type").change(saleTypeHandler)

                // Initiate sales type changing callback function
                function saleTypeHandler(){
                    $("#invoice_rate").attr("min", productData.reseller_price);
                    $("#invoice_rate").attr("max", productData.sale_price);
                    $("#total_quantities").val(1);

                    if($("#order_type").val() === "self"){
                        $("#invoice_rate").val(productData.reseller_price);
                        $("#invoice_rate").attr("disabled", "true");
                        $("#main_total_price").val(productData.reseller_price);
                        productRate = productData.reseller_price;
                    }else if($("#order_type").val() === "business"){
                        $("#invoice_rate").val(productData.sale_price);
                        $("#invoice_rate").removeAttr("disabled");
                        $("#main_total_price").val(productData.sale_price);
                        productRate = productData.sale_price;
                    }else{
                        $("#invoice_rate").val(productData.reseller_price);
                        $("#invoice_rate").attr("disabled", "true");
                        $("#main_total_price").val(productData.reseller_price);
                        productRate = productData.reseller_price;
                    }
                }

                (function(){
                    const selectedProducts = @json($selected_products);

                    selectedProducts.map(function(product){
                        const productListTableBody = productList({
                            id: product.id,
                            image: publicPath + product.thumbnail, 
                            name: product.name, 
                            code: product.code, 
                            rate: $("#main_total_price").val(), //hash
                            quantities: $("#total_quantities").val(), 
                            prices: $("#main_total_price").val(),
                            data: {
                                product_id: product.product_id,
                            }
                        });

                        // console.log(productListTableBody);
                        $("#product-listing-tbody").append(productListTableBody)
                        calculateSubtotal();
                    });
                }())

                // $('#')
            });
        </script>
    @endpush

 --}}      
        
        // $selected_products = array();
        // $selected_products = Product::with(['price'])->whereIn('id', json_decode($data->product_ids))->where('status', true)->get();
        // return compact('resale_prices');
        // return json_decode($data->product_ids);


        
        // $customer = CustomerEntry::findOrFail($id);
        // if($customer->phone != $request->phone) {
        //     $request->validate(['phone'=> 'required|unique:customer_entries,phone']);
        // }
        // $request->validate(['name' => 'required', 'phone'=> 'required|unique:customer_entries,phone', 'reseller_id' => ['required', new ResellerRuleValidation]]);


        // return helperClass::resourceDataStore('customer_entries', $request, ['name', 'reseller_id', 'phone', 'email', 'address'], null, null, $this->route_path);
        // $request->validate(['name' => 'required', 'phone'=> 'required']);
        // return helperClass::resourceDataUpdate('customer_entries', $id, $request, ['name', 'phone', 'email', 'address'], null, null, $this->route_path);
        
            // checkout form submit handler
            // $('#checkout-form').submit(function(event){
            //     // event.preventDefault();
            //     //                 Swal.fire({
            //     //   title: 'You have an account?',
            //     //   showDenyButton: true,
            //     //   showCancelButton: true,
            //     //   confirmButtonText: '<a href="{{ route('customer.login') }}">Login</a>',
            //     //   denyButtonText: `<a href="{{ route('customer.login') }}">Login</a>`,
            //     // }).then((result) => {
            //     //   /* Read more about isConfirmed, isDenied below */
            //     //   if (result.isConfirmed) {
            //     //     Swal.fire('Saved!', '', 'success')
            //     //   } else if (result.isDenied) {
            //     //     Swal.fire('Changes are not saved', '', 'info')
            //     //   }
            //     // });
            //     // Swal.fire({
            //     //     icon: 'success',
            //     //     title: 'Place Order!',
            //     //     text: 'You have an account?',
            //     //     footer: '<a href="{{ route('customer.login') }}">Login</a>'
            //     // });
            //     // Swal.fire({
            //     //         title: 'You have an account?',
            //     //         showDenyButton: true,
            //     //         showCancelButton: true,
            //     //         confirmButtonText: $('#checkout-form').submit(),
            //     //         denyButtonText: `<a href="{{ route('customer.login') }}">Login</a>`,
            //     //     }).then((result) => {
            //     //     /* Read more about isConfirmed, isDenied below */
            //     //     if (result.isConfirmed) {
            //     //         Swal.fire('Saved!', '', 'success')
            //     //     } else if (result.isDenied) {
            //     //         Swal.fire('Changes are not saved', '', 'info')
            //     //     }
            //     // })
            // });


        // $update_id = $request->id;
        // $update_qty = $request->qty;
        // $update_price = $request->price;

            // $cart_product = $cart[$update_id];
            // $cart_product['qty'] = $update_qty; , 'qty'=> [$update_qty, $cart_product['qty']], 'item'=> session()->get('cart')[$update_id]

            // $("[product-quantities]").on('click', ".qty-plus", function(){
            //     const inputEl = $($(this).attr("qty-input"));
            //     const totalPriceId = $($(this).attr("total-price-id"));
            //     const price = Number($(this).attr("price"));

            //     inputEl.val(Number(inputEl.val()) + 1);

            //     totalPriceId.html(Number(inputEl.val()) * price)

            //     calculate();
            // });

            // $("[product-quantities]").on('click', ".qty-minus", function(){
            //     const inputEl = $($(this).attr("qty-input"));
            //     const totalPriceId = $($(this).attr("total-price-id"));
            //     const price = Number($(this).attr("price"));

            //     inputEl.val() > 1 && inputEl.val(Number(inputEl.val()) - 1);
            //     totalPriceId.html(Number(inputEl.val()) * price);

            //     calculate();
            // });

            // $(".checkout-delete-btn").click(function(){
            //     const removeEl = $(this).attr("remove-cart-item");
            //     $(removeEl).remove();

            //     calculate();
            // });

            // function calculate(){
            //     let subTotalPrices = 0, totalQty = 0;
            //     $(".total_prices").each(function(index){
            //         subTotalPrices += Number($($(".total_prices")[index]).html());
            //     })

            //     $(".quantity_wanted").each(function(index){
            //         totalQty += Number($($(".quantity_wanted")[index]).val());
            //     })

            //     $("#total_qty").html(totalQty);
            //     $("#all_total_price").html(subTotalPrices);
            //     $("#total_cart_price").html(subTotalPrices);
            // }
                                                
                                                {{-- @if (!Auth::check())
                                                    <div class="col-12">
                                                        <div class="row g-2 align-items-center">
                                                            <label class="col-md-2 form-control-label" for="password">
                                                                New Account Password
                                                            </label>
                                                            <div class="col-md-8">
                                                                <input type="password" id="password" name="password"
                                                                    placeholder="*******" class="form-control" required>
                                                            </div> 
                                                        </div>
                                                    </div>
                                                @endif --}}
{{-- <div class="accordion-body"> --}}
  {{-- <div class="content"> --}}
      <div class="d-flex gap-4 my-3">
          <input type="hidden" name="shipping_address_id"
              value="{{ $shipping_address ? $shipping_address->id : '' }}">
          <div class="flex-shrink-0 form-check deliver_location">
              <input class="form-check-input" type="radio" id="home"
                  name="address_type"
                  {{ ($shipping_address && $shipping_address->address_type == 'home') || is_null($shipping_address) ? 'checked' : '' }} value="home">
              <label class="form-check-label" for="home">
                  Home
              </label>
          </div>
          <div class="flex-shrink-0 form-check deliver_location">
              <input class="form-check-input" type="radio" id="office"
                  {{ $shipping_address && $shipping_address->address_type == 'office' ? 'checked' : '' }} name="address_type" value="office">
              <label class="form-check-label" for="office">
                  Office
              </label>
          </div>
      </div>
      <div class="row g-3 mb-4 address">
          <div class="col-12">
              <div class="row g-2 align-items-center">
                  <label class="col-md-2 form-control-label required"
                      for="name">Full
                      Name</label>
                  <div class="col-md-8">
                      <input type="text" id="name" name="name"
                          placeholder="Full Name" class="form-control"
                          value="{{ $shipping_address ? $shipping_address->name : old('name') }}">
                  </div>
                  <div class="col-md-2 label">
                  </div>
              </div>
          </div>
          <div class="col-12">
              <div class="row g-2 align-items-center">
                  <label class="col-md-2 form-control-label required"
                      for="phone">Phone
                      Number</label>
                  <div class="col-md-8">
                      <input type="number" id="phone" name="phone"
                          placeholder="Phone Number" class="form-control"
                          value="{{ $shipping_address ? $shipping_address->phone : old('phone') }}">
                  </div>
                  <div class="col-md-2 label">
                  </div>
              </div>
          </div>
          <div class="col-12">
              <div class="row g-2 align-items-center">
                  <label class="col-md-2 form-control-label" for="email">Email
                      Address</label>
                  <div class="col-md-8">
                      <input type="email" id="email" name="email"
                          placeholder="Email Address" class="form-control"
                          value="{{ $shipping_address ? $shipping_address->email : old('email') }}">
                  </div>
                  <div class="col-md-2 label">
                      Optional
                  </div>
              </div>
          </div>
          {{-- <div class="col-12">
              <div class="row g-2 align-items-center">
                  <label class="col-md-2 form-control-label required" 
                      for="division">Division</label>
                  <div class="col-md-8">
                      <select name="division" id="division"
                          class="form-select select2">
                          <option value="">-- Select Division --</option>
                          @foreach ($divisions as $division)
                              <option value="{{ $division->id }}"
                                  {{ $shipping_address && $shipping_address->division_id == $division->id ? 'selected' : '' }}>
                                  {{ $division->name }}</option>
                          @endforeach
                      </select>
                  </div>
                  <div class="col-md-2 label">
                  </div>
              </div>
          </div>
          <div class="col-12">
              <div class="row g-2 align-items-center">
                  <label class="col-md-2 form-control-label required" 
                      for="district">District </label>
                  <div class="col-md-8">
                      <select name="district" id="district"
                          class="form-select select2">
                          @if ($selected_district)
                              <option value="{{ $selected_district->id }}" selected>
                                  {{ $selected_district->name }}</option>
                          @else
                              <option value="">-- Select District --</option>
                          @endif
                      </select>
                  </div>
                  <div class="col-md-2 label">
                  </div>
              </div>
          </div>
          <div class="col-12">
              <div class="row g-2 align-items-center">
                  <label class="col-md-2 form-control-label required"
                      for="upozila">Upozila </label>
                  <div class="col-md-8">
                      <select name="upozila" id="upozila" 
                          class="form-select select2">
                          @if ($selected_upozila)
                              <option value="{{ $selected_upozila->id }}" selected>
                                  {{ $selected_upozila->name }}</option>
                          @else
                              <option value="">-- Select Upozila --</option>
                          @endif
                      </select>
                  </div>
                  <div class="col-md-2 label">
                  </div>
              </div>
          </div> --}}
          <div class="col-12">
              <div class="row g-2 align-items-center">
                  <label class="col-md-2 form-control-label required"
                      for="street">Street </label>
                  <div class="col-md-8">
                      <textarea name="street" id="street" class="form-control" cols="30" rows="3"
                          placeholder="Street Address">{{ $shipping_address ? $shipping_address->street : '' }}</textarea>
                  </div>
                  <div class="col-md-2 label">
                  </div>
              </div>
          </div>
      </div>
  {{-- </div> --}}
{{-- </div> --}}

            // Customer Selection Ended
            

            // $(document).on('change', '#division', function(e) {
            //     let id = $(this).val();
            //     let url = "{{ Route('customer.checkout') }}";
            //     $.ajax({
            //         url: url,
            //         data: {
            //             _method: 'GET',
            //             id: id,
            //         },
            //         success: (response) => {
            //             if (response.status == 'success') {
            //                 var selected_district =
            //                     "{ { $shipping_address ? $shipping_address->district_id : '' }}";
            //                 $('#district').html('');
            //                 $('#upozila').html('');
            //                 $('#upozila').append(
            //                     '<option value="" selected>-- Select Upozila --</option>');
            //                 $('#district').append(
            //                     '<option value="" selected>-- Select District --</option>');
            //                 $.each(response.locations, function(key, value) {
            //                     var option = '<option value="' + value.id + '"';
            //                     if (selected_district != '' && selected_district ==
            //                         value.id) {
            //                         option += ' selected';
            //                     }
            //                     option += '>' + value.name + '</option>';
            //                     $('#district').append(option);
            //                 });
            //             }
            //         }
            //     });
            // });

            // $(document).on('change', '#district', function(e) {
            //     let id = $(this).val();
            //     let url = "{{ Route('customer.checkout') }}";
            //     $.ajax({
            //         url: url,
            //         data: {
            //             _method: 'GET',
            //             id: id,
            //         },
            //         success: (response) => {
            //             if (response.status == 'success') {
            //                 var selected_upozila =
            //                     "{ { $shipping_address ? $shipping_address->upozila_id : '' }}";
            //                 $('#upozila').html('');
            //                 $('#upozila').append(
            //                     '<option value="" selected>-- Select Upozila --</option>');
            //                 $.each(response.locations, function(key, value) {
            //                     var option = '<option value="' + value.id + '"';
            //                     if (selected_upozila != '' && selected_upozila ==
            //                         value.id) {
            //                         option += ' selected';
            //                     }
            //                     option += '>' + value.name + '</option>';
            //                     $('#upozila').append(option);
            //                 });
            //             }
            //         }
            //     });
            // });
            
                                                {{-- @if ($selected_product->product->variant_product)
                                                    @php
                                                        $attribute_names = [];
                                                        $values = explode('-', $selected_product->product->variant_product);
                                                    @endphp
                                                    @foreach (json_decode($product->product->choice_options) as $key => $choice)
                                                        @php
                                                            $attribute_names[] = \App\Models\Attribute::find($choice->attribute_id)->name;
                                                        @endphp
                                                    @endforeach
                                                    <div class="text-xxs pt-1">
                                                        @foreach ($attribute_names as $key => $name)
                                                            {{ $key > 0 ? ', ' : '' }} {{ $name }} :
                                                            {{ $values[$key] }}
                                                        @endforeach
                                                    </div>
                                                @endif  * $selected_product->quantities--}}
                // ->addColumn('checkbox', function($row){
                //     $checkbox = '<div class="custom-control custom-checkbox">
                //     <input type="checkbox" class="custom-control-input multi_checkbox" id="'.$row->id.'" name="multi_checkbox[]" value="'.$row->id.'"><label for="'.$row->id.'" class="custom-control-label"></label></div>';
                //         return $checkbox;
                // })
                // ->addColumn('order_status', function ($row) {
                //     if ($row->status == 'Canceled') {
                //         $status = '<span class="btn btn-xs text-white bg-danger">Canceled</span>';
                //     } elseif ($row->status == 'Successed') {
                //         $status = '<span class="btn btn-xs text-white bg-success">Succeed</span>';
                //     } else {
                //         $status = '<select name="status" class="form-select select2 order_status fs-14" data-id="' . $row->id . '">';

                //         $status .= '<option';
                //         if ($row->status == 'Pending' || $row->status == 'Confirmed' || $row->status == 'Processing' || $row->status == 'Delivered') {
                //             $status .= ' selected disabled';
                //         }
                //         $status .= ' value="Pending">Pending</option>';

                //         $status .= '<option';
                //         if ($row->status == 'Confirmed' || $row->status == 'Processing' || $row->status == 'Delivered') {
                //             $status .= ' selected disabled';
                //         }
                //         $status .= ' value="Confirmed">Confirmed</option>';

                //         $status .= '<option';
                //         if ($row->status == 'Processing' || $row->status == 'Delivered') {
                //             $status .= ' selected disabled';
                //         }
                //         $status .= ' value="Processing">Processing</option>';

                //         $status .= '<option';
                //         if ($row->status == 'Delivered') {
                //             $status .= ' selected disabled';
                //         }
                //         $status .= ' value="Delivered">Delivered</option>';
                //         $status .= '<option value="Successed">Succeed</option>';
                //         $status .= '<option value="Canceled">Canceled</option>';

                //         $status .= '</select>
                //         </form>';
                //     }
                //     return $status;
                // })
                    // $products = ProductPrice::whereIn('product_id', json_decode($row->product_ids))->get();
                    // $products = ProductResalePrice::select('id', 'main_rate', 'resale_rate')->where('order_id', $row->id)->get();
                    // $products_prices = $products->pluck('main_rate')->toArray();

                    // $prices = array();
                    // foreach ($products as $key => $product) {
                    //     $prices[] = $product->main_rate * $product->quantities;
                    // }

                    // return implode(", ", $products_name);

                // ->addColumn('actions', function ($row) {
                //     $edit_route = Route("{$this->route_path['route']}.edit", $row->id);
                //     $show_route = Route("{$this->route_path['route']}.show", $row->id);

                //     $actionBtn = '<div class="btn-group">
                //         <a href="' . $edit_route . '" class="btn btn-sm btn-success border-0 px-10px fs-15"><i class="fas fa-eye"></i></a>
                //         <a href="' . $show_route . '" target="_blank" class="btn btn-sm btn-info text-white border-0 px-10px fs-15"><i class="fas fa-print"></i></a>
                //     </div>';
                //     return $actionBtn;
                // })
        // $model = ProductResalePrice::whereIn('order_id', $orders->pluck('id'))->where('reseller_id', $auth_id)->latest('id');

        // $model = Order::query()->where('user_id', Auth::id());

        // if(UserManagement::role('admin')){
        //     $model = Order::query();
        // }
    // public $user;

    // public function __construct(){
    //     $this->middleware(["auth", 'admin', 'admin_permission']);
    //     $this->user = Auth::user();
    //     if(UserManagement::role('reseller')){
    //         $this->user = User::with('reseller')->findOrFail(Auth::id());
    //     }
    // }
    // Display a listing of the resource.
    // public function index()
    // {
    //     $auth_id = Auth::id();
    //     $orders = Order::where('user_id', $auth_id)->where('status', 'Delivered')->latest('id')->get();
    //     $resale_products = ProductResalePrice::whereIn('order_id', $orders->pluck('id'))->where('reseller_id', $auth_id)->latest('id')->get();

    //     // return ['order_count'=> count($orders), 'order_count'=> count($orders), ]; 
    //     return view('reseller.reseller-commission.index');
    // }                // const _this = $($('.checkout-cart-product .cart-price-box input')[index]);
                // console.log($($(this).attr("set-total-price")));
                        // console.log((+_this.val()) * qty, $(_this.attr("set-total-price")));


                        // console.log($('.cart-price-box input'));
                        // $('.cart-price-box input').each(function(index){
                        //     let _this = $($('.cart-price-box input')[index]);
                        //     console.log(_this);

                        //     const price = _this.attr("reseller-price");
                        //     const qty = $(_this.attr("set-total-quantities")).val();

                        //     $(_this.attr("set-total-price")).html(parseInt(price) * parseInt(qty))
                        //     console.log($(_this.attr("set-total-price")));
                        //     // console.log(parseInt(price) * parseInt(qty));
                        //     // console.log($(_this.attr("set-total-quantities")));
                        //     // console.log($(_this.attr("set-total-price")));

                        //     // console.log($($('.cart-price-box input')[index]), $($('.cart-price-box input')[index]).attr("total-price"));
                        //     // $($('.cart-price-box input')[index]).val(price);
                        //     // $($($('.cart-price-box input')[index]).attr("total-price")).html(parseInt(price) * parseInt(qty))
                        // });


                        // $('.cart-price-box input').each(function(index){
                        //     const price = $($('.cart-price-box input')[index]).attr("regular-price");
                        //     $($('.cart-price-box input')[index]).val(price);
                        // });


                        // $('.cart-price-box input').each(function(index){
                        //     const price = $($('.cart-price-box input')[index]).attr("regular-price");
                        //     $($('.cart-price-box input')[index]).val(price);
                        // });
                    // console.log();

            // $('.checkout-cart-product .cart-price-box input').on("change click", function(){
                //  const _this = $('.checkout-cart-product .cart-price-box input');
            //     $($(this).attr("set-total-price")).html((+$(this).val()) * (+$($(this).attr('set-total-quantities')).val()));
            // });

                    /* $prices = array();
                    // $total = array();
                    $products = ProductResalePrice::select('id', 'main_rate', 'resale_prices', 'quantities')->where('order_id', $row->id)->get();
                    $resale_prices = $products->pluck('resale_prices')->toArray();

                    foreach ($products as $key => $product) {
                        $prices[] = intval($product->main_rate) * intval($product->quantities);
                    }


                    $sum_prices = array_sum($prices) + $row->total;
                    $sum_resale_prices = array_sum($resale_prices) + $row->shipping_charge;
                    $earning = $sum_resale_prices - $sum_prices;

                    return "{$sum_resale_prices} - {$sum_prices}"; */

                    // return number_format($earning) . ' Tk.';
                    
                    // if ($row->status == 'Canceled') {
                    //     $status = '<span class="btn btn-xs text-white bg-danger">Canceled</span>';
                    // } elseif ($row->status == 'Succeed') {
                    //     $status = '<span class="btn btn-xs text-white bg-success">Delivered</span>';
                    // } else {
                    //     $status = '<select name="status" class="form-select select2 order_status fs-14" data-id="' . $row->id . '">';

                    //     $status .= '<option';
                    //     if ($row->status == 'Pending' || $row->status == 'Confirmed' || $row->status == 'Processing' || $row->status == 'Delivered') {
                    //         $status .= ' selected disabled';
                    //     }
                    //     $status .= ' value="Pending">Pending</option>';

                    //     $status .= '<option';
                    //     if ($row->status == 'Confirmed' || $row->status == 'Processing' || $row->status == 'Delivered') {
                    //         $status .= ' selected disabled';
                    //     }
                    //     $status .= ' value="Confirmed">Confirmed</option>';

                    //     $status .= '<option';
                    //     if ($row->status == 'Processing' || $row->status == 'Delivered') {
                    //         $status .= ' selected disabled';
                    //     }
                    //     $status .= ' value="Processing">Processing</option>';

                    //     $status .= '<option';
                    //     if ($row->status == 'Delivered') {
                    //         $status .= ' selected disabled';
                    //     }
                    //     $status .= ' value="Delivered">Delivered</option>';
                    //     // $status .= '<option value="Successed">Successed</option>';
                    //     $status .= '<option value="Canceled">Canceled</option>';

                    //     $status .= '</select>
                    //     </form>';
                    // }
                    // return $status;
                // ->addColumn('order_products', function ($row) {
                //     return count($row->products);
                // })
                // ->addColumn('product_names', function ($row) {
                //     if($row->product_ids){
                //         $products = Product::select('id', 'name')->whereIn('id', json_decode($row->product_ids, true))->where('status', true)->get();
                //         $products_name = $products->pluck('name')->toArray();

                //         return implode(", ", $products_name);
                //     }

                //     return 'Product Name missing';
                // })
                        // $status = function($type){
                        //     switch ($type) {
                        //         case 'Canceled':
                        //             return 'selected';
                        //         case 'Succeed':
                        //             return 'selected';
                        //         case 'Pending':
                        //             return 'selected';
                        //         default: 
                        //             return '';
                        //     }
                        // };

                        // switch ($row->status) {
                        //     case 'Canceled':
                        //         return "<span class='btn btn-xs text-white bg-danger'>Canceled</span>";
    
                        //     case 'Succeed':
                        //        
    
                        //     case 'Pending':
                        //         return '<span class="btn btn-xs text-white bg-warning">Pending</span>'; 
    
                        //     default:
                        //         return '<span class="btn btn-xs text-white bg-warning">Pending</span>';
                        // }
                        
                        <div class="show-account col-md-6" id="show_payment_method">
                            @if ($data->withdrawal_method == 'bank')
                                {!! $account !!}
                            @else
                                {{ $account }}
                            @endif
                        </div>
                                    {{-- <tr>
                                        <th>Adjustment</th>
                                        <th></th>
                                        <th></th>
                                        <th colspan="2">Reserve Balance: ৳1200</th>
                                        <th colspan="2">Available Balance: ৳২০০</th>
                                        {{-- <th></th> -- }}
                                        </tr>                // $('#cart-subtotal-shipping .value').html('{{ $setting->inside_dhaka_charge }}')
                                        // $('.in-dhaka').addClass('d-none');
                                        // $('#cart-subtotal-shipping .value').html('{{ $setting->inside_dhaka_charge }}');
                                        // $('#cart-subtotal-shipping .value').html('{{ $setting->outside_dhaka_charge }}');
                                        // $('.in-dhaka').addClass('d-none');
                                        // $('#delivery_charge').val(0);
                                        // $('#cart-subtotal-shipping .value').html(0);

                                        // console.log(data);
                                            // console.log(balance >= amount, {balance, amount});
                                            // check adjustment balance


                                        // $delivery_charge = ($request->free_delivery || $request->free_delivery == 'true') ? $request->delivery_charge : 0;
                                        // $free_delivery = (!$request->free_delivery || $request->free_delivery == 'false') ? $request->delivery_charge : 0;
                                        // return [
                                        //     // 'customer_id' => $customer->id,
                                        // 'free_delivery' => $request->free_delivery,
                                        // 'price_ids' => $request->price_ids,
                                        // 'product_ids' => $request->product_ids,
                                        // // 'user_name' => $customer->name,
                                        // // 'user_phone' => $customer->phone ? $user->phone : 0,
                                        // 'order_code' => 'R' . mt_rand(111111, 999999),
                                        // 'shipping_charge' => $delivery_charge,
                                        // 'sub_total' => $amount,
                                        // 'total' => $free_delivery,
                                        // 'discount' => $request->discount,
                                        // 'paid' => 0,
                                        // 'due' => $amount,
                                        // 'coupon_id' => NULL,
                                        // 'order_note' => NULL,
                                        // 'payment_method' => $request->order_type,
                                        // 'sales_type' => $request->sales_type,
                                        // 'status' => $status,
                                        // ...$status_time,]; --}}{{-- @php
    $dashboard = App\Helper\AdditionalDataResource::getDashboardData();
@endphp


@extends('layouts.admin.app')
@push('css')
<style>
    .card-counter{
        position: relative;
        box-shadow: 2px 2px 10px #DADADA;
        margin: 5px;
        padding: 20px 10px;
        background-color: #fff;
        height: 100px;
        border-radius: 5px;
        transition: .3s linear all;
    }

    .card-counter:hover{
        box-shadow: 4px 4px 20px #DADADA;
        transition: .3s linear all;
    }

    .card-counter.primary{
        background-color: #007bff;
        color: #FFF;
    }

    .card-counter.danger{
        background-color: #ef5350;
        color: #FFF;
    }  

    .card-counter.success{
        background-color: #66bb6a;
        color: #FFF;
    }  

    .card-counter.info{
        background-color: #26c6da;
        color: #FFF;
    }  

    .card-counter i{
        font-size: 5em;
        opacity: 0.2;
    }

    .card-counter .count-numbers{
        position: absolute;
        right: 35px;
        top: 20px;
        font-size: 32px;
        display: block;
    }

    .card-counter .count-name{
        position: absolute;
        right: 35px;
        top: 65px;
        font-style: italic;
        text-transform: capitalize;
        opacity: 0.5;
        display: block;
        font-size: 18px;
    }

</style>
@endpush
 

@section('content')
    <div class="dashboard">
        <div class="container">
            <div class="row">
                <div class="col-md-3">
                    <div class="card-counter primary">
                        <i class="fab fa-first-order"></i>
                        <span class="count-numbers">{{ $dashboard['total_order'] }}</span>
                        <span class="count-name">Total Order</span>
                    </div>
                </div>
            
                <div class="col-md-3">
                    <div class="card-counter danger">
                        <i class="fas fa-folder-plus"></i>
                        <span class="count-numbers">{{ $dashboard['new_order'] }}</span>
                        <span class="count-name">New Order</span>
                    </div>
                </div>
            
                <div class="col-md-3">
                    <div class="card-counter info">
                        <i class="fas fa-spinner"></i>
                        <span class="count-numbers">{{ $dashboard['on_progress'] }}</span>
                        <span class="count-name">On Progress</span>
                    </div>
                </div>
            
                <div class="col-md-3">
                    <div class="card-counter success">
                        <i class="fas fa-truck-container"></i>
                        <span class="count-numbers">{{ $dashboard['delivered'] }}</span>
                        <span class="count-name">Delivered</span>
                    </div>
                </div>
            </div>
        </div>
    </div>
@endsection --}}

            {{-- <div class="card-header px-3 py-2">
                <div class="d-flex justify-content-between align-items-center">
                    <h6 class="h6 mb-0 text-uppercase">Manage Customer Entry</h6>
                    <a href="{{ Route('admin.reseller-commission.create') }}" class="btn btn-primary btn-sm text-uppercase">Add
                        New</a>
                </div>
            </div> --}}
                            {{-- <th width="3"></th> --}}
                            {{-- <th>Status</th> --}}
                            {{-- <th width="110" class="text-end">Actions</th> --}}

                            {{-- <th class="text-center" colspan="1">
                                <div class="custom-control custom-checkbox">
                                    <input type="checkbox" class="custom-control-input" id="selectAll">
                                    <label class="custom-control-label" for="selectAll"></label>
                                </div>
                            </th>
                            <th colspan="4">
                                <button type="button" name="bulk_delete"
                                    data-url="{{ Route('admin.reseller-commission.destroy', '0') }}" id="bulk_delete"
                                    class="btn btn btn-xs btn-danger">Delete</button>
                            </th>
                            // {
                              //       data: "checkbox",
                              //       name: "checkbox",
                              //       orderable: false,
                              //       searchable: false,
                              //       width: '3'
                              //   }, 
            
                                // {
                                //     data: 'order_status',
                                //     name: 'order_status',
                                //     orderable: false,
                                //     searchable: false,
                                // },
                                // {
                                //     data: 'actions',
                                //     name: 'actions',
                                //     orderable: false,
                                //     searchable: false,
                                //     className: "text-end",
                                // },
 --}}

            // if($request->sales_type == 'adjustment'){
            //     $balance = AdditionalDataResource::getResellerEarning()['reserve_amount'];

            //     if($balance <= intval($amount)){
            //         return redirect()->route('admin.order-place.create')->withErrors('You do not have enough balance for adjustment this order!');
            //     }

            //     Withdraw::create([
            //         'user_id' => $user->id,
            //         'total_earning' => $balance,
            //         'withdrawal_method' => 'Adjustment Order',
            //         'withdraw_amount' => $amount + $free_delivery + $delivery_charge,
            //         'account_number' => '...',
            //         'status' => 'Succeed'
            //     ]);

            //     $status = 'Delivered';
            //     $status_time = ['delivered_at' => Carbon::now()];
            // }

        // $reseller_inquiry_data = function() use($model){
        //     $total_data = array(
        //         'invoice_value' => array(),
        //         'reseller_value' => array(),
        //         'reseller_earning' => array(),
        //     );

        //     $reseller_added_shipping_charge = array();
        //     $shipping_charge = array();

        //     foreach ($model->select('id', 'shipping_charge', 'total')->get() as $key => $order) {  
        //         $shipping_charge[] = intval($order->shipping_charge);         
        //         $reseller_added_shipping_charge[] = intval($order->total);         
        //         $prices = array();
        //         $products = ProductResalePrice::select('id', 'main_rate', 'resale_prices', 'quantities')->where('order_id', $order->id)->get();
        //         $resale_prices = $products->pluck('resale_prices')->toArray();

        //         foreach ($products as $key => $product) {
        //             $prices[] = intval($product->main_rate) * intval($product->quantities);
        //         }

        //         $sum_prices = array_sum($prices);
        //         $sum_resale_prices = array_sum($resale_prices);
        //         $earning = $sum_resale_prices - $sum_prices;

        //         $total_data['invoice_value'][] = $sum_prices;
        //         $total_data['reseller_value'][] = $sum_resale_prices;
        //         $total_data['reseller_earning'][] = $earning;
        //     }

        //     $invoice_value = array_sum($total_data['invoice_value']) + array_sum($shipping_charge);
        //     $reseller_value = array_sum($total_data['reseller_value']) + array_sum($reseller_added_shipping_charge);

        //     return array(
        //         'invoice_value' => $invoice_value,
        //         'reseller_value' => $reseller_value,
        //         'reseller_earning' => $reseller_value - $invoice_value,
        //     );
        // }; 

        // $inquiry_data = $reseller_inquiry_data();

            // $('#inside_dhaka_charge').change(function(){
            //     $('#inside_dhaka_charge').prop('checked', true);
            //     $('#outside_dhaka_charge').prop('checked', false);
            //     $('#deliver_charge_free').prop('checked', false);

            //     $('#delivery_charge').val('{{ $setting->inside_dhaka_charge }}')
            //     $('#cart-subtotal-shipping .value').html('{{ $setting->inside_dhaka_charge }}')
            // }); 

            // function initiateDeliveryCharge(){
            //     $('#inside_dhaka_charge').prop('checked', true);
            //     $('#outside_dhaka_charge').prop('checked', false);
            //     $('#deliver_charge_free').prop('checked', false);

            //     $('#delivery_charge').val('{{ $setting->inside_dhaka_charge }}');
            //     $('#cart-subtotal-shipping .value').html('{{ $setting->inside_dhaka_charge }}');
            // }

            // initiateDeliveryCharge();

            // $('#outside_dhaka_charge').change(function(){
            //     $('#outside_dhaka_charge').prop('checked', true);
            //     $('#inside_dhaka_charge').prop('checked', false);
            //     $('#deliver_charge_free').prop('checked', false);

            //     $('#delivery_charge').val('{{ $setting->outside_dhaka_charge }}')
            //     $('#cart-subtotal-shipping .value').html('{{ $setting->outside_dhaka_charge }}')
            // });
            // $('#deliver_charge_free').change(function(){
            //     $('#outside_dhaka_charge').prop('checked', false);
            //     $('#inside_dhaka_charge').prop('checked', false);
            //     $('#deliver_charge_free').prop('checked', true);

            //     $('#delivery_charge').val(0)
            //     $('#cart-subtotal-shipping .value').html(0)
            // });

                // if($('#outside_dhaka_charge').prop('checked')){
                // }
                // if($('#outside_dhaka_charge').prop('checked')){
                // } 

            // Customer Selection Started
            // $("#order_address_selection #order_type").change(function(){
            //     switch ($(this).val()) {
            //         case 'self':
            //             $('#shipping_address_box').addClass('d-none');
            //             $('#customer_selection_box').addClass('d-none');

            //             calculatePrice('self');
            //             break;
                        
            //         case 'new-business':
            //             $('#shipping_address_box').removeClass('d-none');
            //             $('#customer_selection_box').addClass('d-none');

            //             calculatePrice('new-business');
            //             break;
                        
            //         case 'business':
            //             $('#shipping_address_box').addClass('d-none');
            //             $('#customer_selection_box').removeClass('d-none');

            //             calculatePrice('business');
            //             break; 

            //         default:
            //             $('#shipping_address_box').addClass('d-none');
            //             $('#customer_selection_box').addClass('d-none');

            //             calculatePrice('self');
            //             break;
            //     }
            // });

            // function calculatePrice(type){
            //     $('.checkout-cart-product .cart-price-box input').each(function(index){
            //         const _this = $($('.checkout-cart-product .cart-price-box input')[index]);

            //         const qty = +$(_this.attr('set-total-quantities')).val()
            //         const reseller_price = +_this.attr('reseller-price');
            //         const regular_price = +_this.attr('regular-price');

            //         if(type === 'self'){
            //             _this.val(reseller_price)
            //             _this.attr("disabled", true);
            //             $(_this.attr("set-total-price")).html(reseller_price * qty)
            //         }else if(type === 'new-business'){
            //             _this.val(regular_price)
            //             _this.removeAttr("disabled");
            //             $(_this.attr("set-total-price")).html(regular_price * qty)
            //         }else if(type === 'business'){
            //             _this.val(regular_price)
            //             _this.removeAttr("disabled");
            //             $(_this.attr("set-total-price")).html(regular_price * qty)
            //         }else{ 
            //             $(_this.attr("set-total-price")).html(+_this.val() * qty)
            //             _this.attr("disabled", true);
            //             console.log((+_this.val()) * qty, $(_this.attr("set-total-price")));
            //         } 
            //     });
            // }
            // $('#outside_dhaka_charge').prop('checked', false);
            // $('#inside_dhaka_charge').prop('checked', false);
            // $('#deliver_charge_free').prop('checked', false);

            // if($('#deliver_charge_free').prop('checked')){
            // }else{
                // $('#deliver_charge_free').prop('checked', true);
            // }
            // $('.in-dhaka').removeClass('d-none');
            

        // ['user_id', 'total_earning', 'withdraw_amount', 'account_number', 'withdrawal_method', 'transaction_id', 'status']
        // echo $resale_value() - $target_value();->format('d M Y | h:i A')
        // $withdraw = Withdraw::where('user_id', Auth::id())->latest('id')->get()->toArray();
        // return array_merge($order, $withdraw);

        // $statement = Reseller::with('delivered_orders', 'success_withdraws', 'resale_price', 'user')->where('user_id', Auth::id())->first();
        // return $statement;

        // return array_merge($statement->delivered_orders->toArray(), $statement->success_withdraws->toArray());
        // return view('reseller.statement.index');

        // if(UserManagement::role('Reseller Admin')){
        //     if (request()->ajax()) {
        //         $model = Withdraw::where('user_id', Auth::id());
        //         return DataTables::eloquent($model)
        //             ->filter(function ($query) {
        //                 if (!empty(request('start_date')) && !empty(request('end_date'))) {
        //                     $query->where('created_at', '>=', request('start_date'))->where('created_at', '<=', request('end_date'));
        //                 }
        //                 if (!empty(request('status'))) {
        //                     $query->where('status', request('status'));
        //                 }
        //             }, true)
        //             ->addColumn('date', function($row){
        //                 return $row->created_at->format('Y-m-d | H:i:s');
        //             })
        //             ->addColumn('description', function($row){
        //                 return "<p class='text-center'>" . number_format($row->withdraw_amount, 2) . " Tk</p>";
        //             })
        //             ->addColumn('withdraw', function($row){
        //                 return "<p class='text-center'>" . ucwords($row->account_number) . "</p>";
        //             })
        //             ->addColumn('deposit', function ($row) {
        //                 return 0;
        //             })
        //             ->addColumn('balance', function($row){
        //                 return "<p class='text-center'>". ucwords($row->withdrawal_method) ."</p>";
        //             })
        //             ->rawColumns(['date', 'description', 'withdraw', 'deposit', 'balance'])
        //             ->make(true);
        //     }
/* $orders = Order::select('id', 'customer_id', 'total', 'shipping_charge', 'payment_method', 'order_code', 'sales_type', 'created_at')->where('user_id', Auth::id())->where('status', 'Delivered')->latest('created_at')->get();
        $order_data = array();

        $withdraws = Withdraw::where('user_id', Auth::id())->where('status', 'Succeed')->latest('created_at')->get();
        $withdraw_data = array();

        foreach ($orders as $order) {
            $target_value = function() use($order) {
                $prices = array();
                $products = ProductResalePrice::select('id', 'main_rate', 'quantities')->where('order_id', $order->id)->get();
                
                foreach ($products as $product) {
                    $prices[] = intval($product->main_rate) * intval($product->quantities);
                }

                    return array_sum($prices) + $order->total + $order->shipping_charge;
            };

            $resale_value = function() use($order) {
                $products = ProductResalePrice::select('id', 'resale_prices', 'quantities')->where('order_id', $order->id)->get();
                $resale_prices = array_sum($products->pluck('resale_prices')->toArray());
            
                return $resale_prices + $order->shipping_charge;   
            };

            $buyer = Auth::user()->name;
            if($order->customer_id) {
                $customer = CustomerEntry::select('name', 'phone', 'address')->where('id', $order->customer_id)->first();
                if($customer) $buyer = "{$customer->name} at {$customer->address}. Mobile {$customer->phone}";
            }

            $description = "Sell into {$buyer}. Invoice ID is {$order->order_code}, paid by " . strtoupper($order->payment_method) . " on " . ucwords($order->sales_type) . ".";

            $order_data[] = array(
                'id'=> $order->id,
                'target_value'=>$target_value(),
                'resale_value'=>$resale_value(),
                'deposit'=> $resale_value() - $target_value(),
                'withdraw'=> '0.00',
                'date'=> $order->created_at,
                'description'=> $description,
                'previous_earning'=> '0.00',
            );
        }

        foreach($withdraws as $withdraw){
            $ts_id = $withdraw->transaction_id ? ' of transaction ID are ' . $withdraw->transaction_id : '';
            $description = "Withdraw from " . ucwords($withdraw->withdrawal_method) . " at {$withdraw->account_number}{$ts_id}.";

            $withdraw_data[] = array(
                'id'=> $withdraw->id,
                'deposit'=> '0.00',
                'withdraw'=> $withdraw->withdraw_amount,
                'previous_earning'=> $withdraw->total_earning,
                'date'=> $order->created_at,
                'description'=> $description
            );
        }
        $data = array_merge($order_data, $withdraw_data);

        usort($data, function($a, $b) {return strtotime($a['date']) - strtotime($b['date']);}); */
        
        // $orders = Order::select('id', 'customer_id', 'total', 'shipping_charge', 'payment_method', 'order_code', 'sales_type', 'created_at')
        //     ->where('user_id', Auth::id())
        //     ->where('status', 'Delivered')
        //     ->latest('created_at')
        //     ->get();

        // $withdraws = Withdraw::where('user_id', Auth::id())
        //     ->where('status', 'Succeed')
        //     ->latest('created_at')
        //     ->get();

        // if (request()->ajax()) {
        //     $combinedData = $orders->concat($withdraws);

        //     return DataTables::eloquent($combinedData)
        //         ->filter(function ($query) {
        //             // if (!empty(request('start_date')) && !empty(request('end_date'))) {
        //             //     $query->where('created_at', '>=', request('start_date'))->where('created_at', '<=', request('end_date'));
        //             // }
        //             // if (!empty(request('status'))) {
        //             //     $query->where('status', request('status'));
        //             // }
        //         }, true)
        //         ->addColumn('date', function ($row) {
        //             return 0;
        //         })
        //         ->addColumn('description', function ($row) {
        //             return 0;
        //         })
        //         ->addColumn('withdraw', function ($row) {
        //             return 0;
        //         })
        //         ->addColumn('deposit', function ($row) {
        //             return 0;
        //         })
        //         ->addColumn('balance', function ($row) {
        //             return 0;
        //         })
                // ->addColumn('order_date', function ($row) {
                //     return Carbon::parse($row->created_at)->format('d M Y | h:i A');
                // })
                // ->addColumn('product_details', function($row){
                //     $products = Product::select('id', 'name')->whereIn('id', json_decode($row->product_ids, true))->where('status', true)->get();
                //     $products_name = $products->pluck('name')->toArray();

                //     return implode(", ", $products_name);
                // })
                // ->addColumn('invoice_value', function($row){
                //     $prices = array();
                //     $products = ProductResalePrice::select('id', 'main_rate', 'quantities')->where('order_id', $row->id)->get();
                    
                //     foreach ($products as $key => $product) {
                //         $prices[] = intval($product->main_rate) * intval($product->quantities);
                //     }

                //     return number_format((array_sum($prices) + $row->shipping_charge + $row->total), 2) . ' Tk.';
                // })
                // ->addColumn('reseller_value', function($row){
                //     $products = ProductResalePrice::select('id', 'resale_prices', 'quantities')->where('order_id', $row->id)->get();
                //     $resale_prices = array_sum($products->pluck('resale_prices')->toArray());
                    
                //     return number_format(($resale_prices + $row->shipping_charge), 2) . ' Tk.';
                // })
                // ->addColumn('reseller_earning', function($row){
                //     $target_value = function() use($row) {
                //         $prices = array();
                //         $products = ProductResalePrice::select('id', 'main_rate', 'quantities')->where('order_id', $row->id)->get();
                        
                //         foreach ($products as $key => $product) {
                //             $prices[] = intval($product->main_rate) * intval($product->quantities);
                //         }

                //         return array_sum($prices) + $row->total + $row->shipping_charge;
                //     };

                //     $resale_value = function() use($row) {
                //         $products = ProductResalePrice::select('id', 'resale_prices', 'quantities')->where('order_id', $row->id)->get();
                //         $resale_prices = array_sum($products->pluck('resale_prices')->toArray());
                    
                //         return $resale_prices + $row->shipping_charge;   
                //     };

                //     $earning = number_format($resale_value() - $target_value());
                //     return "<p class='text-center'>{$earning} Tk.</p>";
                // })
        //         ->rawColumns(['date', 'description', 'withdraw', 'deposit', 'balance'])
        //         ->make(true);
        // }

        // return [$order_data, $withdraw_data];, compact('data')

        $orders = Order::select('id', 'customer_id', 'total', 'shipping_charge', 'payment_method', 'order_code', 'sales_type', 'created_at')
            ->where('user_id', Auth::id())
            ->where('status', 'Delivered')
            ->latest('created_at')
            ->get();

        $withdraws = Withdraw::where('user_id', Auth::id())
                    ->where('status', 'Succeed')
                    ->latest('created_at');
                    // ->get();

        if (request()->ajax()) {
            $combinedData = $orders->concat($withdraws);

            return DataTables::eloquent($withdraws)
                ->filter(function ($query) {
                }, true)
                ->addColumn('date', function ($row) {
                    return 0;
                })
                ->addColumn('description', function ($row) {
                    return 0;
                })
                ->addColumn('withdraw', function ($row) {
                    return 0;
                })
                ->addColumn('deposit', function ($row) {
                    return 0;
                })
                ->addColumn('balance', function ($row) {
                    return 0;
                })
                ->rawColumns(['date', 'description', 'withdraw', 'deposit', 'balance'])
                ->make(true);
        }


        return view('reseller.statement.index');


            // const discount = Number($('#discount').val());
        // $('#child-category').html(selectBox(response.child_categories));
        // function selectBox(data){
        //     return `<select name="select_child_category" id="select_child_category" class="select form-control" data-placeholder="Select Child Category">
        //                 <option value=""></option>
        //                 ` + data.map(item => `<option value="${item.id}">${item.name}</option>`) + ` 
        //             </select>`;
        // }
                        // $('#select_child_category').html('<option value=""></option>');
                        // $('#select_product').html('<option value=""></option>');
                        // response.child_categories.map(item =>
                        //     $('#select_child_category').append(`<option value="${item.id}">${item.name}</option>`)
                        // );

                        // response.products.map(product =>
                        //     $('#select_product').append(`<option value="${product.id}">${product.name}</option>`)
                        // );
        // $categories = Category::root()->with(['children'])->orderBy('name')->get();
        // ['date', 'product_name', 'reseller_price', 'discount', 'discount_price', 'status', 'actions'];
        // return Product::select('id', 'name', 'category_id')->take(2)->get();
        // return "{$row->start_date} - {$row->end_date}";
        // $model = Category::with(['parent', 'products'])->latest('id');
        // return AdditionalDataResource::getParentCategoryProducts('18');
        // $categories = Category::root()->with(['children'])->orderBy('name')->get();
        // $categories = Category::with('parent')->where('status', true)->get();


|---------------------------------------------------------|
|    Date	    Day 	Holiday                           |
|---------------------------------------------------------|
    21  Feb	    Tue 	Shaheed Day
|---------------------------------------------------------|
    8   Mar	    Wed 	Shab e-Barat
|---------------------------------------------------------|
    17  Mar	    Fri 	Sheikh Mujibur Rahman’s Birthday
|---------------------------------------------------------|
    26  Mar	    Sun 	Independence Day
|---------------------------------------------------------|
    14  Apr	    Fri 	Bengali New Year
|---------------------------------------------------------|
    19  Apr	    Wed 	Laylat al-Qadr
|---------------------------------------------------------|
    21  Apr	    Fri 	Jumatul Bidah
|---------------------------------------------------------|
    21  Apr	    Fri 	Eid ul-Fitr Holiday
|---------------------------------------------------------|
    22  Apr	    Sat 	Eid ul-Fitr
|---------------------------------------------------------|
    23  Apr	    Sun 	Eid ul-Fitr Holiday
|---------------------------------------------------------|
    1   May	    Mon 	May Day
|---------------------------------------------------------|
    4   May	    Thu 	Buddha Purnima
|---------------------------------------------------------|
    28  Jun	    Wed 	Eid ul-Adha Holiday
|---------------------------------------------------------|
    29  Jun	    Thu 	Eid ul-Adha
|---------------------------------------------------------|
    30  Jun	    Fri 	Eid ul-Adha Holiday
|---------------------------------------------------------|
    29  Jul	    Sat 	Ashura
|---------------------------------------------------------|
    15  Aug	    Tue 	National Mourning Day
|---------------------------------------------------------|
    6   Sep	    Wed 	Shuba Janmashtami
|---------------------------------------------------------|
    28  Sep	    Thu 	Eid-e-Milad un-Nabi
|---------------------------------------------------------|
    24  Oct	    Tue 	Vijaya Dashami
|---------------------------------------------------------|
    16  Dec	    Sat 	Victory Day
|---------------------------------------------------------|
    25  Dec	    Mon 	Christmas Day
|---------------------------------------------------------|